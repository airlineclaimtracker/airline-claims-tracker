<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ========================================= -->
    <!-- META TAGS & DOCUMENT SETTINGS -->
    <!-- ========================================= -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>SmartwingsWatch - Document Airline Claim Experiences</title>
    <meta name="description" content="Help passengers document and share airline claim experiences for better accountability and awareness.">
    
    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="SmartwingsWatch - Passenger Rights Documentation Tool">
    <meta property="og:description" content="Tool to help passengers document airline claim experiences and build awareness for better customer service accountability.">
    <meta property="og:type" content="website">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#e63946">
    
    <!-- ========================================= -->
    <!-- CSS STYLES START -->
    <!-- ========================================= -->
    <style>
        /* ========================================= */
        /* CSS CUSTOM PROPERTIES (DESIGN TOKENS) */
        /* ========================================= */
        
        :root {
            /* Colors */
            --primary-red: #dc3545;
            --dark-red: #c82333;
            --accent-yellow: #FFD93D;
            --text-dark: #1d3557;
            --bg-light: #f8f9fa;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --surface: #fafafa;
            
            /* Spacing */
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 40px;
            
            /* Sizes */
            --border-radius: 12px;
            --max-content-width: 1000px;
            
            /* Typography */
            --font-xs: 0.75rem;
            --font-sm: 0.875rem;
            --font-base: 1rem;
            --font-lg: 1.125rem;
            --font-xl: 1.5rem;
            --font-2xl: 2rem;
            --font-3xl: 2.5rem;
        }
        
        /* ========================================= */
        /* GLOBAL STYLES */
        /* ========================================= */
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }
        
        /* ========================================= */
        /* LAYOUT CONTAINERS */
        /* ========================================= */
        
        .content-section {
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ========================================= */
        /* FORM SECTION STYLES */
        /* ========================================= */
        
        .form-section {
            background: white;
            padding: var(--spacing-lg);
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: var(--spacing-md);
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        .form-section h2 {
            color: var(--text-dark);
            margin-top: 0;
            font-size: 1.4rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: var(--spacing-md);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-item {
            display: flex;
            flex-direction: column;
        }
        
        /* ========================================= */
        /* FORM INPUT STYLES */
        /* ========================================= */
        
        label {
            color: #1d3557;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        input,
        select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            transition: border-color 0.3s;
        }
        
        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-red);
        }
        
        /* ========================================= */
        /* BUTTON STYLES */
        /* ========================================= */
        
        .btn {
            background: linear-gradient(135deg, var(--primary-red), var(--dark-red));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            font-size: var(--font-base);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            text-decoration: none;
            margin: 20px auto;
            width: max-content;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(220, 53, 69, 0.4);
        }
        
        /* ========================================= */
        /* UPLOAD STYLES */
        /* ========================================= */
        
        .upload-btn-clean {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 14px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            font-size: 1rem;
            gap: 8px;
        }
        
        .upload-btn-clean:hover {
            background: #f0f0f0;
            border-color: var(--primary-red);
        }
        
        .btn-icon {
            font-size: 1.2rem;
        }
        
        /* ========================================= */
        /* PHOTO HANDLING STYLES */
        /* ========================================= */
        
        .photo-controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .photo-btn {
            background: #6c757d;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
            min-height: 44px;
            min-width: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .photo-btn:hover {
            background: #5a6268;
        }
        
        .photo-btn.remove {
            background: #dc3545;
        }
        
        .photo-btn.remove:hover {
            background: #c82333;
        }
        
        /* ========================================= */
        /* SUCCESS/ERROR MESSAGE STYLES */
        /* ========================================= */
        
        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
            font-size: 1rem;
            text-align: center;
        }
        
        .success-message.show {
            display: block;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
            font-weight: 500;
        }
        
        .error-message.show {
            display: block;
        }
        
        /* ========================================= */
        /* PRIVACY SECTION STYLES */
        /* ========================================= */
        
        .privacy-notice {
            max-width: 800px;
            margin: 25px auto;
            padding: 0 40px;
        }

        .privacy-context {
            background: #f8f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px 20px;
            text-align: center;
            margin-top: 20px;
        }

        .privacy-benefits {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .benefit-item {
            font-size: 0.85rem;
            color: #28a745;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .privacy-policy-link {
            font-size: 0.9rem;
            color: #666;
            margin: 0;
        }

        .privacy-policy-link a {
            color: var(--primary-red);
            text-decoration: none;
            font-weight: 600;
        }

        .privacy-policy-link a:hover {
            text-decoration: underline;
        }

        .privacy-consent {
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            background: #f8f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px 20px;
            text-align: left;
        }

        .privacy-consent input[type="checkbox"] {
            margin-top: 4px;
            min-width: 20px;
            min-height: 20px;
        }

        .privacy-consent label {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #666;
            font-weight: 500;
        }

        .privacy-consent a {
            color: var(--primary-red);
            text-decoration: none;
            font-weight: 600;
        }

        .privacy-consent a:hover {
            text-decoration: underline;
        }
        
        /* ========================================= */
        /* AI-BUILT EXPLANATION STYLES */
        /* ========================================= */

        .ai-built-explanation {
            background: #f0f4f8;
            border-left: 4px solid #5c7cfa;
            padding: 15px 20px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }

        .ai-built-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .ai-built-explanation h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #364fc7;
        }

        .ai-built-explanation p {
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 15px;
            color: #4a5568;
        }

        .ai-built-note {
            font-size: 0.85rem;
            padding: 10px;
            background: rgba(255,255,255,0.7);
            border-radius: 6px;
            font-style: italic;
            color: #4a5568;
        }
        
        /* ========================================= */
        /* UNIFIED CONTAINER STYLES */
        /* ========================================= */
        
        .unified-container {
            max-width: 800px;
            margin: 20px auto 40px auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 40px;
            text-align: center;
        }
        
        .story-part {
            padding-bottom: 30px;
        }
        
        .form-part {
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }
        
        .upload-integrated {
            margin-top: 25px;
            padding-top: 25px;
        }
        
        .separator-light {
            border-top: 1px solid #f0f0f0;
            margin-bottom: 20px;
        }
        
        /* ========================================= */
        /* CREATION STORY STYLES */
        /* ========================================= */

        .creation-story {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .creation-story h3 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .story-content {
            position: relative;
            z-index: 2;
        }

        .story-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #555;
        }

        .story-icon {
            font-size: 24px;
            margin-bottom: 15px;
            text-align: center;
        }

        .ai-developer-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: white;
            border-radius: 30px;
            margin-top: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            gap: 8px;
            font-size: 0.9rem;
            color: #555;
        }

        .claude-logo {
            width: 18px;
            height: 18px;
        }

        .creation-story::before {
            content: '{ }';
            position: absolute;
            right: -20px;
            top: -30px;
            font-size: 150px;
            opacity: 0.05;
            font-family: monospace;
            transform: rotate(10deg);
        }
        
        /* ========================================= */
        /* EMOTIONAL ANCHOR STYLES */
        /* ========================================= */
        
        .emotional-anchor {
            margin: 30px auto;
            text-align: center;
            padding: 20px;
            max-width: 300px;
            position: relative;
        }

        .days-counter-large {
            font-size: 120px;
            font-weight: 900;
            color: #dc2626;
            line-height: 1;
            margin-bottom: 5px;
            animation: pulse-subtle 4s infinite;
            text-shadow: 0 2px 10px rgba(220, 38, 38, 0.15);
        }

        .days-label-large {
            font-size: 22px;
            font-weight: 700;
            color: #374151;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .highlight-text {
            background: linear-gradient(to bottom, transparent 40%, rgba(220, 38, 38, 0.1) 40%, rgba(220, 38, 38, 0.1) 80%, transparent 80%);
            padding: 0 4px;
        }

        .context {
            margin-bottom: 1.5rem;
        }
        
        .context-text {
            font-size: 1.1rem;
            color: #1d1d1f;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .context-text strong {
            color: var(--primary-red);
            font-weight: 600;
        }

        @keyframes pulse-subtle {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        /* ========================================= */
        /* VIRAL SHARING SYSTEM STYLES */
        /* ========================================= */
        
        .viral-sharing-container {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .sharing-strategy-header {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border-radius: 12px;
        }

        .strategy-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1976d2;
            margin-bottom: 8px;
        }

        .strategy-subtitle {
            color: #666;
            font-size: 0.95rem;
        }

        /* Platform-optimized buttons */
 /* Platform-optimized buttons - COMPACT VERSION */
.platform-shares {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Smaller min-width */
    gap: 12px; /* Smaller gap */
    margin: 20px 0; /* Smaller margin */
}

.platform-share-card {
    border: 2px solid #f0f0f0;
    border-radius: 10px; /* Smaller radius */
    padding: 15px; /* Much smaller padding */
    background: white;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    /* FIX: Reduce overall size */
    min-height: auto;
}

.platform-header {
    display: flex;
    align-items: center;
    gap: 10px; /* Smaller gap */
    margin-bottom: 10px; /* Smaller margin */
}

.platform-strategy {
    font-size: 0.8rem; /* Smaller text */
    color: #666;
    margin-bottom: 12px; /* Smaller margin */
    line-height: 1.3;
}

.platform-buttons {
    display: flex;
    gap: 8px; /* Smaller gap */
    flex-wrap: wrap;
}

.viral-btn {
    padding: 8px 12px; /* Smaller padding */
    border: none;
    border-radius: 6px; /* Smaller radius */
    font-size: 0.85rem; /* Smaller text */
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 5px; /* Smaller gap */
    flex: 1;
    min-width: 100px; /* Smaller min-width */
    justify-content: center;
    min-height: 36px; /* Fixed smaller height */
}

        .viral-btn.primary {
            background: var(--platform-color);
            color: white;
        }

        .viral-btn.secondary {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #e0e0e0;
        }

        .viral-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Instagram-specific styles */
        .instagram-workflow {
            background: linear-gradient(135deg, rgba(240, 148, 51, 0.1), rgba(188, 24, 136, 0.1));
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
        }

        .workflow-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .workflow-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #e4405f;
        }

        .step-number {
            width: 24px;
            height: 24px;
            background: #e4405f;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .step-text {
            font-size: 0.9rem;
            color: #333;
        }

        /* Mobile optimization */
        .mobile-native-share {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 16px;
            padding: 25px;
            color: white;
            text-align: center;
            margin: 25px 0;
        }

        .native-share-btn {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .native-share-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Success feedback */
        .sharing-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .sharing-success.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Campaign mechanics indicators */
        .viral-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            font-size: 0.7rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 700;
        }

        .engagement-boost {
            background: #51cf66;
        }

        .reach-amplifier {
            background: #339af0;
        }

        .viral-catalyst {
            background: #ff6b6b;
        }
        
        /* Legacy share buttons */
        .share-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .share-btn {
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .share-btn.download {
            border-color: #28a745;
            color: #28a745;
        }
        
        .share-btn.download:hover {
            background: #28a745;
            color: white;
        }
        
        .share-btn.copy {
            border-color: #6c757d;
            color: #6c757d;
        }
        
        .share-btn.copy:hover {
            background: #6c757d;
            color: white;
        }
      /* ========================================= */
        /* CARD SELECTION TOGGLE STYLES */
        /* ========================================= */

        .card-selection-container {
            background: white;
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .card-selection-container h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1d3557;
            margin-bottom: 10px;
        }

        .card-selection-container p {
            color: #666;
            margin-bottom: 20px;
        }

        .card-toggle {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .card-toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
            color: #666;
        }

        .card-toggle-btn.active {
            background: #dc3545;
            color: white;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.2);
        }

        .card-toggle-btn svg {
            stroke: currentColor;
        }
        
        /* ========================================= */
        /* MAXIMUM IMPACT CARD STYLES */
        /* ========================================= */

        .claim-card-impact {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background-image: linear-gradient(135deg, #dc2626, #991b1b);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(220, 38, 38, 0.3);
            overflow: hidden;
            padding: 30px;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: white;
            position: relative;
        }

        .claim-card-impact .card-content {
            position: relative;
            z-index: 2;
        }

        .claim-card-impact .card-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .claim-card-impact .report-label {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #fde047;
            margin-bottom: 5px;
        }

        .claim-card-impact .airline-name {
            font-size: 32px;
            font-weight: 900;
            letter-spacing: -0.02em;
        }

        .claim-card-impact .evidence-photo {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid #fde047;
            min-height: 180px;
        }

        .claim-card-impact .evidence-photo img {
            width: 100%;
            height: auto;
            display: block;
        }

        .claim-card-impact .photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .claim-card-impact .damage-label {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 14px;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 8px;
            letter-spacing: 0.5px;
            position: absolute;
            bottom: 10px;
            right: 10px;
        }

        .claim-card-impact .days-container {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .claim-card-impact .days-count {
            font-size: 80px;
            font-weight: 900;
            color: #dc2626;
            line-height: 1;
            animation: pulse-impact 2s infinite;
        }

        @keyframes pulse-impact {
            0% { transform: scale(1); text-shadow: 0 0 10px rgba(255,255,255,0.1); }
            50% { transform: scale(1.05); text-shadow: 0 0 20px rgba(255,255,255,0.3); }
            100% { transform: scale(1); text-shadow: 0 0 10px rgba(255,255,255,0.1); }
        }

        .claim-card-impact .days-label {
            font-size: 14px;
            font-weight: 700;
            color: #dc2626;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .claim-card-impact .details-band {
            background: rgba(0, 0, 0, 0.2);
            margin: 0 -30px 25px;
            padding: 20px 30px;
            display: flex;
            justify-content: space-around;
        }

        .claim-card-impact .detail-item {
            text-align: center;
        }

        .claim-card-impact .detail-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .claim-card-impact .detail-value {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .claim-card-impact .cta {
            background: white;
            color: #dc2626;
            text-align: center;
            padding: 15px;
            font-weight: 700;
            font-size: 16px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .claim-card-impact .hashtags {
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            color: #fde047;
        }
        
        /* ========================================= */
        /* INDUSTRY CONTEXT FOCUSED CARD STYLES */
        /* ========================================= */

        .claim-card-context {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            padding: 30px;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: #1e293b;
            position: relative;
        }

        .claim-card-context .context-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .claim-card-context .airline-name {
            font-size: 32px;
            font-weight: 900;
            letter-spacing: -0.02em;
            color: #dc2626;
            margin-bottom: 15px;
        }

        .claim-card-context .claim-days {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
        }

        .claim-card-context .waiting-label {
            font-weight: 600;
            color: #dc2626;
        }

        .claim-card-context .claim-details {
            display: flex;
            justify-content: space-between;
            background: white;
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .claim-card-context .claim-amount {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
        }

        .claim-card-context .claim-date {
            font-size: 18px;
            font-weight: 500;
            color: #64748b;
        }

        .claim-card-context .industry-context-section {
            background: #dc2626;
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.2);
        }

        .claim-card-context .context-title {
            font-size: 20px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 20px;
            letter-spacing: 0.03em;
        }

        .claim-card-context .context-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .claim-card-context .context-stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 10px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .claim-card-context .context-stat-value {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .claim-card-context .context-stat-label {
            font-size: 12px;
            opacity: 0.8;
            line-height: 1.3;
        }

        .claim-card-context .context-source {
            font-size: 12px;
            opacity: 0.6;
            text-align: center;
            font-style: italic;
        }

        .claim-card-context .evidence-photo {
            position: relative;
            min-height: 180px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .claim-card-context .evidence-photo img {
            width: 100%;
            height: auto;
            object-fit: cover;
        }

        .claim-card-context .photo-placeholder {
            color: #94a3b8;
            font-size: 14px;
        }

        .claim-card-context .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .claim-card-context .hashtags {
            font-size: 14px;
            font-weight: 600;
            color: #0284c7;
        }
        
        /* ========================================= */
        /* AI-POWERED BADGE STYLES */
        /* ========================================= */

        .ai-powered-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: rgba(255,255,255,0.9);
            border-radius: 12px;
            padding: 6px 12px;
            font-size: 11px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .badge-icon {
            font-size: 16px;
        }

        .badge-text {
            display: flex;
            flex-direction: column;
        }

        .badge-title {
            font-weight: 600;
            color: #333;
        }

        .badge-subtitle {
            font-size: 9px;
            color: #666;
        }

        .claim-card-impact .ai-powered-badge {
            background: rgba(0,0,0,0.7);
        }

        .claim-card-impact .badge-title {
            color: white;
        }

        .claim-card-impact .badge-subtitle {
            color: rgba(255,255,255,0.7);
        }

        .claim-card-context .ai-powered-badge {
            background: rgba(255,255,255,0.85);
        }

        /* Hover effect */
        .ai-powered-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }
        
        /* ========================================= */
        /* RESPONSIVE DESIGN - MOBILE STYLES */
        /* ========================================= */
        
        /* Responsive design */
        @media (max-width: 768px) {
            .content-section {
                padding: 15px 10px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .btn, .share-btn, .card-toggle-btn {
                width: 100%;
                min-height: 44px; /* iOS minimum touch target size */
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .btn {
                padding: 18px;
                font-size: 1rem;
            }
            
            /* Fix card designs for mobile */
            .claim-card-impact,
            .claim-card-context {
                width: 100%;
                max-width: 100%;
                padding: 20px;
                height: auto;
                min-height: 600px;
            }
            
            /* Improve card toggle on mobile */
            .card-toggle {
                flex-direction: column;
            }
            
            .card-toggle-btn {
                width: 100%;
                justify-content: center;
            }
            
            /* Fix share grid on mobile */
            .share-grid {
                grid-template-columns: 1fr;
            }
            
            .platform-shares {
                grid-template-columns: 1fr;
            }
            
            .platform-buttons {
                flex-direction: column;
            }
            
            .viral-btn {
                min-width: 100%;
            }

            .mobile-native-share {
                display: block;
            }

            .platform-shares {
                display: none;
            }
            
            /* Make all form inputs larger and more touch-friendly */
            input, select, .btn, .upload-btn-clean {
                height: 50px;
                font-size: 16px !important; /* Prevents iOS zoom on input focus */
                -webkit-appearance: none; /* Removes default styling on iOS */
                appearance: none;
            }
            
            .form-item {
                margin-bottom: 15px;
            }
            
            /* Optimize photo preview section */
            #photo-preview-section {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            #photo-preview {
                max-width: 90%;
                max-height: 200px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            }
            
            .photo-controls {
                margin-top: 15px;
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            
            .photo-btn {
                min-height: 44px;
                min-width: 90px;
                padding: 10px 16px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .privacy-consent {
                padding: 12px 15px;
            }
            
            .privacy-consent input[type="checkbox"] {
                min-width: 24px;
                min-height: 24px;
            }
            
            .ai-built-explanation {
                padding: 12px 15px;
                margin: 20px 0;
            }
            
            .ai-built-explanation h4 {
                font-size: 1rem;
            }
            
            .creation-story {
                padding: 20px;
                margin: 20px 0;
            }
            
            .creation-story h3 {
                font-size: 1.3rem;
            }
            
            .ai-developer-badge {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
            
            .privacy-notice {
                padding: 0 10px;
            }
            
            .privacy-benefits {
                flex-direction: column;
                gap: 8px;
            }
            
            .benefit-item {
                justify-content: center;
            }
            
            .claim-card-impact .days-count {
                font-size: 60px;
            }
            
            .claim-card-impact .details-band {
                margin: 0 -20px 20px;
                padding: 15px 20px;
            }
            
            .claim-card-context {
                padding: 20px;
            }
            
            .claim-card-context .context-stats {
                grid-template-columns: 1fr;
            }
            
            .claim-card-context .claim-details {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (min-width: 769px) {
            .mobile-native-share {
                display: none;
            }
        }
        
        /* Add this to your CSS for better iOS handling */
        @media screen and (max-width: 768px) {
            /* iOS-specific styles for better sharing */
            @supports (-webkit-touch-callout: none) {
                /* iOS devices only */
                .share-btn, .mobile-share-btn, .mobile-share-option {
                    -webkit-appearance: none;
                    -webkit-touch-callout: none;
                    -webkit-tap-highlight-color: rgba(0,0,0,0);
                    touch-action: manipulation;
                }
                
                /* Avoid zoom on input selection */
                input, select, textarea {
                    font-size: 16px !important;
                }
                
                /* Fix iOS image rendering */
                .claim-card-impact,
                .claim-card-context {
                    -webkit-transform: translateZ(0);
                    transform: translateZ(0);
                }
            }
        }

        /* Enhanced success messages for manual steps */
.sharing-success {
    background: #e3f2fd;
    border: 2px solid #1976d2;
    color: #0d47a1;
    padding: 20px;
    border-radius: 12px;
    margin: 15px 0;
    display: none;
    font-size: 0.95rem;
    line-height: 1.5;
}

.sharing-success.show {
    display: block;
    animation: slideInBounce 0.5s ease;
}

.sharing-success strong {
    color: #1976d2;
    display: block;
    margin-bottom: 8px;
}

@keyframes slideInBounce {
    0% { opacity: 0; transform: translateY(-20px) scale(0.9); }
    50% { opacity: 1; transform: translateY(5px) scale(1.02); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}
      /* Overall compact design improvements */
.viral-sharing-container {
    background: white;
    border-radius: 12px;
    padding: 20px; /* Reduced from 25px */
    box-shadow: 0 6px 20px rgba(0,0,0,0.08); /* Lighter shadow */
    margin: 15px 0; /* Reduced margin */
}

.sharing-strategy-header {
    text-align: center;
    margin-bottom: 20px; /* Reduced margin */
    padding: 15px; /* Reduced padding */
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    border-radius: 10px; /* Smaller radius */
}

.strategy-title {
    font-size: 1.2rem; /* Slightly smaller */
    font-weight: 700;
    color: #1976d2;
    margin-bottom: 6px; /* Smaller margin */
}

.strategy-subtitle {
    color: #666;
    font-size: 0.9rem; /* Smaller text */
}
    </style>
</head>

<!-- ========================================= -->
<!-- HTML BODY STARTS HERE -->
<!-- ========================================= -->

<body>
    <!-- ========================================= -->
    <!-- MAIN CONTENT SECTION -->
    <!-- ========================================= -->
    
    <div class="content-section">
        <!-- ========================================= -->
        <!-- HERO SECTION WITH STORY & FORM -->
        <!-- ========================================= -->
        
        <section class="unified-container">
            <div class="integrated-header">
                <h1 class="site-title">SmartwingsWatch</h1>
                <p class="site-tagline">Making Claim Delays Visible</p>
                <div class="separator-line"></div>
            </div>
            
            <!-- Story Section -->
            <div class="story-part">
                <div class="emotional-anchor">
                    <div class="days-counter-large">620</div>
                    <div class="days-label-large">days of silence</div>
                </div>
                
                <div class="context">
                    <p class="context-text">
                        I filed a Smartwings <strong>luggage damage claim</strong> and expected a response. 
                        <span class="highlight-text">Instead, I've been met with <strong>complete silence</strong>.</span>
                    </p>
                    <p class="context-text">
                        You're not alone if you're experiencing the same. Together, we can make these patterns visible.
                    </p>
                </div>
            </div>
            
            <!-- ========================================= -->
            <!-- CLAIM FORM SECTION -->
            <!-- ========================================= -->
            
            <div class="form-part" id="create">
                <h2>üìù Document Your Experience</h2>
                <form id="claim-form">
                    <!-- Form Grid -->
                    <div class="form-grid">
                        <div class="form-item">
                            <label for="submission-month">Claim submission month</label>
                            <select id="submission-month" required>
                                <option value="">Select Month</option>
                                <option value="1">January</option>
                                <option value="2">February</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6">June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <label for="submission-year">Year</label>
                            <select id="submission-year" required>
                                <option value="">Select Year</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <label for="amount">Claim Amount (‚Ç¨)</label>
                            <input type="number" id="amount" required min="1" placeholder="e.g. 200">
                        </div>
                    </div>
                    
                    <!-- ========================================= -->
                    <!-- PHOTO UPLOAD SECTION -->
                    <!-- ========================================= -->
                    
                    <div class="upload-integrated">
                        <div class="separator-light"></div>
                        <p style="margin-bottom: 15px;">
                            <strong>üì∏ Evidence photo</strong> 
                            <span style="color: #888; font-size: 0.9rem;">(optional)</span>
                        </p>
                        <input type="file" id="photo-input" accept="image/*;capture=camera" style="display: none;">
                        
                        <button type="button" onclick="document.getElementById('photo-input').click()" class="upload-btn-clean">
                            <span class="btn-icon">üì∑</span>
                            <span class="btn-text">Take or Choose Photo</span>
                        </button>
                        
                        <!-- Photo Preview Section -->
                        <div id="photo-preview-section" style="margin-top: 15px; display: none;">
                            <img id="photo-preview" style="max-width: 200px; max-height: 150px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div class="photo-controls" style="margin-top: 10px;">
                                <button class="photo-btn" onclick="rotatePhoto()">üîÑ Rotate</button>
                                <button class="photo-btn" onclick="adjustPhoto()">üé® Brighten</button>
                                <button class="photo-btn remove" onclick="removePhoto()">‚ùå Remove</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Error Message Container -->
                    <div id="error-message" class="error-message"></div>
                    <!-- Success Message Container -->
                    <div id="success-message" class="success-message"></div>

                    <!-- Privacy Consent -->
                   <div class="privacy-consent">
                        <input type="checkbox" id="privacy-consent" required>
                        <label for="privacy-consent">
                            I understand that my claim details (month/year, amount, waiting days) 
                            will be used to generate a shareable card. No personal information is collected or stored.
                            <a href="/privacy-policy.html" target="_blank">Privacy Policy</a>
                        </label>
                    </div>
                    
                    <!-- Submit Button -->
                    <button type="submit" class="btn">üöÄ Create Your Experience Card</button>
                    
                    <!-- AI-Built Explanation -->
                    <div class="ai-built-explanation">
                        <div class="ai-built-icon">üß©</div>
                        <h4>This tool was built without writing a single line of code</h4>
                        <p>As a frustrated passenger with no programming background, I described what I wanted to Claude.ai, and it generated all the necessary code, which I then implemented. This is how accessible technology creation has become.</p>
                        <div class="ai-built-note">Similar to how you don't need legal expertise to document your experience with this tool, I didn't need coding expertise to build it.</div>
                    </div>
                    
                    <!-- ========================================= -->
                    <!-- PRIVACY NOTICE SECTION -->
                    <!-- ========================================= -->
                    
                    <div class="privacy-notice">
                        <div class="privacy-context">
                            <div class="privacy-benefits">
                                <span class="benefit-item">üîí Processed locally</span>
                                <span class="benefit-item">üö´ No data stored</span>
                                <span class="benefit-item">‚ú® You control sharing</span>
                            </div>
                            <p class="privacy-policy-link">
                                <a href="privacy.html">Privacy Policy</a> - Your data never leaves your device
                            </p>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <!-- ========================================= -->
<!-- CREATION STORY SECTION -->
<!-- ========================================= -->

<div class="creation-story" id="creation-story">
    <h3>The Story Behind This Tool</h3>
    <div class="story-content">
        <div class="story-icon">ü§ñ‚û°Ô∏èüß∞</div>
        <p>
            <strong>Built without coding skills:</strong> I'm not a developer. I created this entire tool by collaborating with Claude.ai, explaining my frustrations and vision as a customer would to a design studio.
        </p>
        <p>
            <strong>AI-powered development:</strong> Every line of code, every design element, and every function was generated through conversation with Claude.ai. This represents how AI is democratizing technology creation for everyday people seeking solutions.
        </p>
        <p>
            <strong>From frustration to innovation:</strong> After 620+ days of being ignored by Smartwings, I turned to AI to create something that could help others document similar experiences. If I could build this without coding skills, imagine what you could create.
        </p>
        <div class="ai-developer-badge">
            <span>Developed in conversation with</span>
            <img src="https://claude.ai/favicon.ico" alt="Claude.ai logo" class="claude-logo">
            <span>Claude.ai</span>
        </div>
    </div>
</div>

<!-- ========================================= -->
<!-- CARD DESIGN SELECTOR -->
<!-- ========================================= -->

<div class="card-selection-container" id="card-selection-container" style="display: none;">
    <h3>Choose Your Card Design</h3>
    <p>Select the style that best represents your experience</p>
    
    <div class="card-toggle">
        <button class="card-toggle-btn active" data-design="impact">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
            Maximum Impact
        </button>
        <button class="card-toggle-btn" data-design="context">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M7 17l4-4 4 4 6-6"/></svg>
            Industry Data
        </button>
    </div>
</div>
        
        <!-- ========================================= -->
        <!-- GENERATED CLAIM CARD SECTION -->
        <!-- ========================================= -->
        
<div id="card-section" style="display: none;">
    
    <!-- Maximum Impact Design -->
    <div class="claim-card-impact" id="impact-card">
        <!-- Card Content -->
        <div class="card-content">
            <!-- Header -->
            <div class="card-header">
                <div class="report-label">PASSENGER CLAIM IGNORED</div>
                <div class="airline-name">SMARTWINGS</div>
            </div>
            
            <!-- Damage Evidence Photo -->
            <div class="evidence-photo">
                <div id="impact-photo-container" style="display: none;">
                    <img id="impact-photo" alt="Damaged luggage evidence">
                </div>
                <div class="photo-overlay">
                    <div class="damage-label">EVIDENCE OF DAMAGE</div>
                </div>
            </div>
            
            <!-- Days Count -->
            <div class="days-container">
                <div class="days-count" id="impact-days-count">0</div>
                <div class="days-label">Days Without Response</div>
            </div>
            
            <!-- Claim Details Band -->
            <div class="details-band">
                <div class="detail-item">
                    <div class="detail-label">CLAIM FILED</div>
                    <div class="detail-value" id="impact-submission-date">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">AMOUNT</div>
                    <div class="detail-value" id="impact-amount-value">‚Ç¨0</div>
                </div>
            </div>
            
            <!-- Call to Action -->
            <div class="cta">HAVE THEY IGNORED YOUR CLAIM TOO?</div>
            
            <!-- Industry Context Section -->
            <div class="industry-context">
                <div class="industry-context-title">YOU ARE NOT ALONE</div>
                <div class="industry-stats">
                    <div class="stat-item">
                        <div class="stat-value">11,620</div>
                        <div class="stat-label">damaged bags yearly</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">‚Ç¨1.16M</div>
                        <div class="stat-label">potential claims</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">?</div>
                        <div class="stat-label">how many waiting?</div>
                    </div>
                </div>
                <div class="data-source">Source: SITA 2024 Baggage IT Insights</div>
            </div>
            
            <!-- Hashtags -->
            <div class="hashtags">#SmartwingsWatch #PassengerRights</div>
            <div class="ai-powered-badge">
                <div class="badge-icon">ü§ñ</div>
                <div class="badge-text">
                    <div class="badge-title">AI-Created Tool</div>
                    <div class="badge-subtitle">Built by a passenger with Claude.ai</div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Industry Context Focused Card -->
    <div class="claim-card-context" id="context-card" style="display: none;">
        <div class="context-header">
            <div class="airline-name">SMARTWINGS</div>
            <div class="claim-days">
                <span id="context-days-count">0</span> DAYS
                <span class="waiting-label">WITHOUT RESPONSE</span>
            </div>
        </div>
        
        <div class="claim-details">
            <div class="claim-amount">
                My Claim: ‚Ç¨<span id="context-amount-value">0</span>
            </div>
            <div class="claim-date">
                Filed: <span id="context-submission-date">-</span>
            </div>
        </div>
        
        <div class="evidence-photo">
            <div id="context-photo-container" style="display: none; width: 100%; height: 100%;">
                <img id="context-photo" alt="Damaged luggage evidence">
            </div>
            <div class="photo-placeholder" id="context-photo-placeholder">
                üì∑ Evidence Photo
            </div>
        </div>

        <div class="industry-context-section">
            <h2 class="context-title">YOU ARE NOT ALONE</h2>
            <div class="context-stats">
                <div class="context-stat">
                    <div class="context-stat-value">11,620</div>
                    <div class="context-stat-label">damaged bags annually</div>
                </div>
                <div class="context-stat">
                    <div class="context-stat-value">‚Ç¨1.16M</div>
                    <div class="context-stat-label">in potential claims</div>
                </div>
                <div class="context-stat">
                    <div class="context-stat-value">?</div>
                    <div class="context-stat-label">how many others waiting?</div>
                </div>
            </div>
            <div class="context-source">Based on SITA 2024 data (1.4 damaged bags per 1,000 passengers)</div>
        </div>
        
        <div class="card-footer">
            <div class="hashtags">#SmartwingsWatch #PassengerRights</div>
            <div class="ai-powered-badge">
                <div class="badge-icon">ü§ñ</div>
                <div class="badge-text">
                    <div class="badge-title">AI-Created Tool</div>
                    <div class="badge-subtitle">Built by a passenger with Claude.ai</div>
                </div>
            </div>
        </div>
    </div>
</div>
        
        <!-- ========================================= -->
        <!-- VIRAL SHARING SECTION -->
        <!-- ========================================= -->

<div class="share-section" id="share-section" style="display: none;">
    <div class="viral-sharing-container">
        <!-- Strategy Header -->
        <div class="sharing-strategy-header">
            <div class="strategy-title">üöÄ Viral Campaign Sharing</div>
            <div class="strategy-subtitle">Each platform optimized for maximum impact and zero friction</div>
        </div>

        <!-- Mobile Native Sharing (shown on mobile only) -->
        <div class="mobile-native-share">
            <h3>üì± One-Tap Sharing</h3>
            <p>Share to any app instantly with your story and image attached</p>
            <button class="native-share-btn" id="mobile-native-share">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
                Share Your Story
            </button>
        </div>

        <!-- Platform-Specific Sharing (desktop) -->
        <div class="platform-shares">
            <!-- Twitter/X Card -->
            <div class="platform-share-card twitter">
                <div class="viral-indicator viral-catalyst">VIRAL CATALYST</div>
                <div class="platform-header">
                    <div class="platform-icon twitter">ùïè</div>
                    <div class="platform-name">Twitter/X</div>
                </div>
                <div class="platform-strategy">
                    <strong>Strategy:</strong> Reaches aviation journalists & consumer advocates. Optimized for retweets and viral spread.
                </div>
                <div class="platform-buttons">
                    <button class="viral-btn primary" id="twitter-story-share">
                        <span>üìñ</span> Share Story
                    </button>
                    <button class="viral-btn secondary" id="twitter-image-copy">
                        <span>üì∏</span> Copy Image
                    </button>
                </div>
            </div>

            <!-- LinkedIn Card -->
            <div class="platform-share-card linkedin">
                <div class="viral-indicator engagement-boost">ENGAGEMENT BOOST</div>
                <div class="platform-header">
                    <div class="platform-icon linkedin">in</div>
                    <div class="platform-name">LinkedIn</div>
                </div>
                <div class="platform-strategy">
                    <strong>Strategy:</strong> Professional network impact. Showcases AI innovation + consumer rights advocacy.
                </div>
                <div class="platform-buttons">
                    <button class="viral-btn primary" id="linkedin-professional-share">
                        <span>üíº</span> Professional Post
                    </button>
                    <button class="viral-btn secondary" id="linkedin-prepare-post">
                        <span>üìù</span> Prepare & Copy
                    </button>
                </div>
            </div>

            <!-- Instagram Card -->
            <div class="platform-share-card instagram">
                <div class="viral-indicator reach-amplifier">REACH AMPLIFIER</div>
                <div class="platform-header">
                    <div class="platform-icon instagram">üì∑</div>
                    <div class="platform-name">Instagram</div>
                </div>
                <div class="platform-strategy">
                    <strong>Strategy:</strong> Visual storytelling for maximum viral potential. Stories + Posts optimization.
                </div>
                <div class="platform-buttons">
                    <button class="viral-btn primary" id="instagram-story-ready">
                        <span>üì±</span> Story Ready
                    </button>
                    <button class="viral-btn secondary" id="instagram-post-ready">
                        <span>üìã</span> Post Ready
                    </button>
                </div>
                
                <!-- Instagram workflow -->
                <div class="instagram-workflow">
                    <div class="workflow-steps">
                        <div class="workflow-step">
                            <div class="step-number">1</div>
                            <div class="step-text">Image automatically saved to your device</div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">2</div>
                            <div class="step-text">Story caption copied to clipboard</div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Instagram opens - add image & paste caption</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Facebook Card -->
            <div class="platform-share-card facebook">
                <div class="viral-indicator engagement-boost">ENGAGEMENT BOOST</div>
                <div class="platform-header">
                    <div class="platform-icon facebook">f</div>
                    <div class="platform-name">Facebook</div>
                </div>
                <div class="platform-strategy">
                    <strong>Strategy:</strong> Travel communities & support groups. Optimized for shares and group discussions.
                </div>
                <div class="platform-buttons">
                    <button class="viral-btn primary" id="facebook-community-share">
                        <span>üë•</span> Community Post
                    </button>
                    <button class="viral-btn secondary" id="facebook-copy-ready">
                        <span>üìÑ</span> Copy & Prepare
                    </button>
                </div>
            </div>
        </div>

        <!-- Success feedback -->
        <div class="sharing-success" id="sharing-success"></div>

        <!-- Legacy Share Buttons (fallback) -->
        <div class="share-grid" style="display: none;">
            <button class="share-btn download" onclick="downloadCard()">
                <span>üì∏</span> Get Your Card
            </button>
            <button class="share-btn copy" onclick="copyImageToClipboard()">
                <span>üìã</span> Copy Image
            </button>
        </div>
    </div>
</div>

    </div> <!-- End content-section -->

<!-- ========================================= -->
<!-- JAVASCRIPT LIBRARIES -->
<!-- ========================================= -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!-- ========================================= -->
<!-- MAIN JAVASCRIPT CODE -->
<!-- ========================================= -->

<script>
    
    // ========================================
    // GLOBAL VARIABLES
    // ========================================
    
    let currentCardDesign = 'impact';
    let currentPhoto = null;
    let currentRotation = 0;
    let currentBrightness = 100;
    let claimData = {};
    
    // ========================================
    // PAGE INITIALIZATION
    // ========================================
    
    // Initialize the page when DOM loads
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded, initializing...');
        initializeYears();
        setupEventListeners();
        setupViralSharingEventListeners();
        
        // Auto-detect mobile and optimize interface
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // Show mobile-optimized interface
            const mobileShare = document.querySelector('.mobile-native-share');
            const desktopShare = document.querySelector('.platform-shares');
            
            if (mobileShare) mobileShare.style.display = 'block';
            if (desktopShare) desktopShare.style.display = 'none';
        }
    });

    // Platform detection utility
        function getPlatformInstructions(platform) {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            
            return {
                isMobile,
                isIOS,
                isAndroid,
                pasteKey: navigator.platform.indexOf('Mac') > -1 ? 'Cmd+V' : 'Ctrl+V'
            };
        }
    
    // ========================================
    // FORM SETUP FUNCTIONS
    // ========================================
    
    /**
     * Initialize year dropdown with current and previous years
     */
    function initializeYears() {
        const yearSelect = document.getElementById('submission-year');
        const currentYear = new Date().getFullYear();
        
        for (let year = currentYear; year >= currentYear - 5; year--) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        }
    }
    
    /**
     * FIXED: Set up event listeners with proper photo handling
     */
    function setupEventListeners() {
        console.log("Setting up event listeners...");
        
        // Form submission handler
        const form = document.getElementById('claim-form');
        if (form) {
            form.addEventListener('submit', handleFormSubmit);
            console.log("Form submit listener added");
        }
        
        // Photo upload setup - FIXED
        const photoInput = document.getElementById('photo-input');
        if (photoInput) {
            photoInput.addEventListener('change', function(e) {
                console.log("Photo input changed, files:", e.target.files.length);
                if (e.target.files.length > 0) {
                    processFile(e.target.files[0]);
                }
            });
            console.log("Photo input listener added");
        }
        
        // Download button
        const downloadBtn = document.querySelector('.share-btn.download');
        if (downloadBtn) {
            downloadBtn.addEventListener('click', downloadCard);
            console.log("Download button listener added");
        }
        
        // Copy button
        const copyBtn = document.querySelector('.share-btn.copy');
        if (copyBtn) {
            copyBtn.addEventListener('click', copyImageToClipboard);
            console.log("Copy button listener added");
        }
        
        console.log("Event listeners setup complete");
    }
    
    // ========================================
    // ERROR HANDLING FUNCTIONS
    // ========================================
    
    /**
     * Display error message to user
     */
    function showError(message) {
        const errorEl = document.getElementById('error-message');
        errorEl.textContent = message;
        errorEl.classList.add('show');
        
        setTimeout(() => {
            errorEl.classList.remove('show');
        }, 5000);
    }
    
    // ========================================
    // FORM SUBMISSION & VALIDATION
    // ========================================
    
    /**
     * FIXED: Handle form submission and validation - GENERATES CARDS LOCALLY
     */
    function handleFormSubmit(e) {
        e.preventDefault();
        console.log('Form submitted');
        
        try {
            // Get form values with detailed logging
            const monthElement = document.getElementById('submission-month');
            const yearElement = document.getElementById('submission-year');
            const amountElement = document.getElementById('amount');
            const privacyConsent = document.getElementById('privacy-consent');
            
            if (!monthElement || !yearElement || !amountElement) {
                console.error("Form elements not found!");
                showError('Error: Form elements not found. Please refresh the page.');
                return;
            }
            
            // Check privacy consent
            if (privacyConsent && !privacyConsent.checked) {
                console.warn("Privacy consent not checked");
                showError('Please agree to the privacy terms to continue');
                return;
            }
            
            const month = monthElement.value;
            const year = yearElement.value;
            const amount = amountElement.value;
            
            console.log("Form values - Month:", month, "Year:", year, "Amount:", amount);
            
            if (!month || !year || !amount) {
                console.warn("Missing required fields:", {month, year, amount});
                showError('Please fill in all fields to document your experience');
                return;
            }
            
            // Convert values to ensure they're numbers
            const monthNum = parseInt(month, 10);
            const yearNum = parseInt(year, 10);
            const amountNum = parseInt(amount, 10);
            
            if (isNaN(monthNum) || isNaN(yearNum) || isNaN(amountNum)) {
                console.error("Invalid number conversion:", {monthNum, yearNum, amountNum});
                showError('Please enter valid numbers for month, year, and amount');
                return;
            }
            
            const days = calculateDaysSince(monthNum, yearNum);
            console.log("Calculated days:", days);
            
            // Calculate submission date for display
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const submissionDate = `${months[monthNum - 1]} ${yearNum}`;
            
            // FIXED: Store data locally and generate cards instead of redirecting
            claimData = {
                days: days,
                amount: amountNum,
                month: monthNum,
                year: yearNum,
                submissionDate: submissionDate
            };
            
            console.log("Claim data stored:", claimData);
            
            // Update the cards with the new data
            updateBothCards();
            
            // Show the card section
            showCard();
            
            // Show success message
            const successEl = document.getElementById('success-message');
            if (successEl) {
                successEl.textContent = 'Your experience card has been created! Choose a design and share it.';
                successEl.classList.add('show');
                
                setTimeout(() => {
                    successEl.classList.remove('show');
                }, 5000);
            }
            
        } catch (error) {
            console.error('Form error:', error);
            showError('Error creating card. Please check your input and try again.');
        }
        
        // After successful card creation, enable viral sharing
        if (claimData && claimData.days) {
            // Track form completion
            trackViralCampaignEvent('form', 'card_generated', {
                'days': claimData.days,
                'amount': claimData.amount,
                'has_photo': !!currentPhoto
            });
            
            // Initialize viral sharing with current data
            console.log('Viral sharing enabled with data:', claimData);
        }
    }

    /**
     * Calculate days between submission date and today
     */
    function calculateDaysSince(month, year) {
        console.log(`Calculating days since month=${month}, year=${year}`);
        
        // Create submission date (first day of the month)
        const submissionDate = new Date(year, month - 1, 1);
        console.log("Submission date object:", submissionDate);
        
        // Get current date
        const today = new Date();
        console.log("Today's date:", today);
        
        // Calculate time difference in milliseconds
        const diffTime = Math.abs(today - submissionDate);
        console.log("Time difference (ms):", diffTime);
        
        // Convert to days and round up
        const days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        console.log("Calculated days:", days);
        
        return days;
    }
    
    // ========================================
    // CARD UPDATE & DISPLAY FUNCTIONS
    // ========================================
    
    /**
     * FIXED: Show the generated card and share section
     */
    function showCard() {
        console.log("Showing card section...");
        
        // Show card selection toggle
        const cardSelectionContainer = document.getElementById('card-selection-container');
        if (cardSelectionContainer) {
            cardSelectionContainer.style.display = 'block';
        }
        
        // Show card section and share options
        const cardSection = document.getElementById('card-section');
        const shareSection = document.getElementById('share-section');
        
        if (cardSection) {
            cardSection.style.display = 'block';
            console.log("Card section displayed");
        }
        
        if (shareSection) {
            shareSection.style.display = 'block';
            console.log("Share section displayed");
        }
        
        // Initialize photo display
        if (currentPhoto) {
            console.log("Updating card photos...");
            updateAllCardPhotos();
        } else {
            console.log("No photo to display, showing placeholders");
            resetAllCardPhotos();
        }
        
        // Set up card toggle functionality and show correct design
        setupCardToggle();
        
        // Ensure the impact card is visible by default
        const impactCard = document.getElementById('impact-card');
        const contextCard = document.getElementById('context-card');
        
        if (impactCard) {
            impactCard.style.display = 'block';
            console.log("Impact card displayed");
        }
        if (contextCard) {
            contextCard.style.display = 'none';
        }
        
        // Set current design
        currentCardDesign = 'impact';
        
        // Scroll to section
        if (cardSelectionContainer) {
            setTimeout(() => {
                cardSelectionContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }
        
        console.log("Card display setup complete");
    }
  // ========================================
    // PHOTO HANDLING FUNCTIONS
    // ========================================
    
    /**
     * FIXED: Process uploaded photo file
     */
    function processFile(file) {
        console.log('Processing file:', file.name, file.type, file.size);
        
        if (!file.type.match('image.*')) {
            showError('Please select an image file showing the damage');
            return;
        }
        
        if (file.size > 10 * 1024 * 1024) { // Increased to 10MB
            showError('File size must be less than 10MB');
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            currentPhoto = e.target.result;
            currentRotation = 0;
            currentBrightness = 100;
            console.log('Photo loaded successfully, length:', currentPhoto.length);
            showPhotoPreview();
            updateAllCardPhotos();
            showSuccess('‚úÖ Photo uploaded and added to your card!');
        };
        reader.onerror = function() {
            showError('Error reading the photo file. Please try again.');
        };
        reader.readAsDataURL(file);
    }
    
    /**
     * FIXED: Show photo preview in form
     */
    function showPhotoPreview() {
        const preview = document.getElementById('photo-preview');
        const previewSection = document.getElementById('photo-preview-section');
        
        if (preview && previewSection && currentPhoto) {
            preview.src = currentPhoto;
            preview.style.transform = `rotate(${currentRotation}deg)`;
            preview.style.filter = `brightness(${currentBrightness}%)`;
            previewSection.style.display = 'block';
            console.log('Photo preview shown');
        }
    }
    
    /**
     * Rotate photo 90 degrees
     */
    function rotatePhoto() {
        currentRotation = (currentRotation + 90) % 360;
        applyImageTransforms();
        console.log("Photo rotated to:", currentRotation);
    }
    
    /**
     * Adjust photo brightness
     */
    function adjustPhoto() {
        currentBrightness = currentBrightness === 100 ? 130 : 100;
        applyImageTransforms();
        console.log("Photo brightness:", currentBrightness);
    }
    
    /**
     * Remove photo
     */
    function removePhoto() {
        currentPhoto = null;
        currentRotation = 0;
        currentBrightness = 100;
        
        document.getElementById('photo-preview-section').style.display = 'none';
        document.getElementById('photo-input').value = '';
        
        resetAllCardPhotos();
        console.log("Photo removed");
    }
    
    /**
     * FIXED: Apply transforms to photos
     */
    function applyImageTransforms() {
        const transform = `rotate(${currentRotation}deg)`;
        const filter = `brightness(${currentBrightness}%)`;
        
        // Apply to preview
        const preview = document.getElementById('photo-preview');
        if (preview) {
            preview.style.transform = transform;
            preview.style.filter = filter;
        }
        
        // Apply to all card photos
        const cardPhotos = [
            'impact-photo', 
            'context-photo'
        ];
        
        cardPhotos.forEach(photoId => {
            const photo = document.getElementById(photoId);
            if (photo) {
                photo.style.transform = transform;
                photo.style.filter = filter;
            }
        });
    }
    
    // ========================================
    // MESSAGE GENERATION FUNCTIONS
    // ========================================
    
    /**
     * Generate campaign-style message
     */
    function generateCampaignMessage() {
        const currentUrl = window.location.href;
        
        return `Documenting Airline Accountability: ${claimData.days} days without resolution for a ‚Ç¨${claimData.amount} luggage damage claim.

Industry data suggests thousands of passengers may face similar delays. I've created this visualization tool to bring transparency to the claims process.

Explore the data: ${currentUrl}

#PassengerRights #AirlineAccountability`;
    }
    
    // Platform-optimized message generators
    function generateViralTwitterMessage() {
        return `üö® ACCOUNTABILITY UPDATE: ${claimData.days} days without response from @Smartwings to my ‚Ç¨${claimData.amount} luggage damage claim.

Industry data: ~11,620 damaged bags yearly. Are you also waiting?

#SmartwingsWatch #PassengerRights #ConsumerProtection

Create your documentation: ${window.location.origin}`;
    }
    
    function generateViralLinkedInMessage() {
        return `# AI-Enabled Consumer Advocacy + Airline Accountability

I'm sharing two interconnected stories:

## 1. Industry Pattern Documentation
After ${claimData.days} days without response to a luggage damage claim, I documented this case using industry data. SITA's 2024 report shows 11,000+ damaged bags annually for this carrier.

## 2. AI Innovation for Consumer Rights  
Rather than accepting silence, I leveraged AI (Claude.ai) to create a transparency tool despite having no coding background. This represents how emerging tech empowers consumer advocacy.

üîó Document your experience: ${window.location.origin}

Have you used AI to solve unexpected problems? Or faced similar travel claim delays?

#ConsumerRights #AIInnovation #PassengerRights #TravelTech`;
    }

    function generateViralInstagramStoryCaption() {
        return `DAY ${claimData.days}: Still waiting for @smartwings to respond to my ‚Ç¨${claimData.amount} claim üò§

Swipe up to create your own accountability card ‚¨ÜÔ∏è

#SmartwingsWatch #PassengerRights #TravelFail #AirlineAccountability #ConsumerRights`;
    }

    function generateViralInstagramPostCaption() {
        return `‚úàÔ∏è TRAVEL INDUSTRY REALITY CHECK ‚úàÔ∏è

${claimData.days} days of complete silence from @smartwings on my ‚Ç¨${claimData.amount} luggage damage claim.

Here's what the data shows:
üìä 11,620+ damaged bags annually (SITA 2024)
üí∞ ‚Ç¨1.16M+ in potential claims  
‚ùì How many passengers are waiting?

I built this transparency tool with AI to document these patterns. No coding skills needed - just frustration and Claude.ai ü§ñ

Are you also waiting for an airline response? Link in bio to document your experience.

#PassengerRights #AirlineAccountability #TravelRights #ConsumerProtection #SmartwingsWatch #TravelTips #AIInnovation`;
    }
    
    function generateViralFacebookMessage() {
        return `‚úàÔ∏è AIRLINE ACCOUNTABILITY AWARENESS ‚úàÔ∏è

I'm sharing my experience as part of a passenger rights transparency campaign:

üìÖ ${claimData.days} days without response to a ‚Ç¨${claimData.amount} luggage claim
üè¢ Company: Smartwings
üìä Industry context: 11,620+ damaged bags annually (SITA 2024 data)

This might be a systemic pattern affecting thousands of passengers. I created a data visualization tool (with AI assistance) to help document these experiences.

Have you faced similar delays with travel claims? You can create your own documentation card here: ${window.location.origin}

Sharing for awareness and to help other travelers understand their rights.

#PassengerRights #TravelRights #ConsumerAwareness #AirlineAccountability`;
    }
    
    // ========================================
    // VIRAL SHARING FUNCTIONS
    // ========================================
    
  function setupViralSharingEventListeners() {
    console.log('Setting up viral sharing listeners...');
    
    // Mobile native sharing
    const mobileNativeBtn = document.getElementById('mobile-native-share');
    if (mobileNativeBtn) {
        mobileNativeBtn.addEventListener('click', mobileNativeShare);
        console.log('Mobile native listener added');
    }

    // Twitter/X sharing
    const twitterStoryBtn = document.getElementById('twitter-story-share');
    if (twitterStoryBtn) {
        twitterStoryBtn.addEventListener('click', shareToTwitterViral);
        console.log('Twitter story listener added');
    }

    const twitterImageBtn = document.getElementById('twitter-image-copy');
    if (twitterImageBtn) {
        twitterImageBtn.addEventListener('click', copyTwitterImage);
        console.log('Twitter image listener added');
    }

    // LinkedIn sharing - CRITICAL FIX
    const linkedinProfessionalBtn = document.getElementById('linkedin-professional-share');
    if (linkedinProfessionalBtn) {
        linkedinProfessionalBtn.addEventListener('click', function(e) {
            e.preventDefault(); // Prevent default action
            console.log('LinkedIn professional button clicked');
            shareToLinkedInViral(); // Call LinkedIn function, NOT download
        });
        console.log('LinkedIn professional listener added');
    } else {
        console.error('LinkedIn professional button not found');
    }

    const linkedinPrepareBtn = document.getElementById('linkedin-prepare-post');
    if (linkedinPrepareBtn) {
        linkedinPrepareBtn.addEventListener('click', function(e) {
            e.preventDefault(); // Prevent default action
            console.log('LinkedIn prepare button clicked');
            linkedInPreparePost(); // Call LinkedIn function, NOT download
        });
        console.log('LinkedIn prepare listener added');
    } else {
        console.error('LinkedIn prepare button not found');
    }

    // Instagram sharing
    const instagramStoryBtn = document.getElementById('instagram-story-ready');
    if (instagramStoryBtn) {
        instagramStoryBtn.addEventListener('click', prepareInstagramStoryViral);
        console.log('Instagram story listener added');
    }

    const instagramPostBtn = document.getElementById('instagram-post-ready');
    if (instagramPostBtn) {
        instagramPostBtn.addEventListener('click', prepareInstagramPostViral);
        console.log('Instagram post listener added');
    }

    // Facebook sharing
    const facebookCommunityBtn = document.getElementById('facebook-community-share');
    if (facebookCommunityBtn) {
        facebookCommunityBtn.addEventListener('click', shareToFacebookViral);
        console.log('Facebook listener added');
    }

    console.log('Viral sharing event listeners initialized');
}

async function shareToTwitterViral() {
    try {
        const message = generateViralTwitterMessage();
        await saveImageToDevice('twitter-accountability-card.png');
        await copyToClipboard(message);
        
        // Official Twitter web intent with text parameter - WORKS 2025
        const encodedText = encodeURIComponent(message);
        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodedText}`;
        window.open(twitterUrl, '_blank', 'width=600,height=500');
        
        showSuccess(`
            ‚úÖ <strong>Twitter Ready!</strong><br>
            üì∏ Image saved to Downloads<br>
            üìù Message pre-filled in Twitter<br>
            üê¶ <strong>Next Steps:</strong><br>
            1. Click the image icon (üì∑) in Twitter<br>
            2. Select your saved image<br>
            3. Click "Post"!
        `, 12000);
    } catch (error) {
        showSuccess('‚ùå Twitter prep failed. Please try again.', 3000);
    }
}

async function shareToLinkedInViral() {
    try {
        console.log('LinkedIn sharing started...');
        
        const message = generateViralLinkedInMessage();
        await saveImageToDevice('linkedin-professional-post.png');
        await copyToClipboard(message);
        
        // CORRECT 2025 LinkedIn URL - URL parameter ONLY
        const baseUrl = encodeURIComponent(window.location.origin);
        const linkedinUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${baseUrl}`;
        
        console.log('Opening LinkedIn URL:', linkedinUrl);
        window.open(linkedinUrl, '_blank');
        
        showSuccess(`
            ‚úÖ <strong>LinkedIn Ready!</strong><br>
            üì∏ Image saved to Downloads<br>
            üìù Full message copied to clipboard<br>
            ‚ö†Ô∏è <strong>LinkedIn 2025 Update:</strong><br>
            1. LinkedIn will auto-pull title from your page<br>
            2. Paste your copied message in the text area<br>
            3. Upload your saved image<br>
            4. Publish to your network!
        `, 15000);
    } catch (error) {
        console.error('LinkedIn sharing error:', error);
        showSuccess('‚ùå LinkedIn sharing failed. Please try again.', 3000);
    }
}

async function linkedInPreparePost() {
    try {
        console.log('LinkedIn prepare started...');
        
        const message = generateViralLinkedInMessage();
        await saveImageToDevice('linkedin-prepared-post.png');
        await copyToClipboard(message);
        
        showSuccess(`
            ‚úÖ <strong>LinkedIn Content Prepared!</strong><br>
            üìù Full message copied to clipboard<br>
            üì∏ Image saved to Downloads<br>
            üìã <strong>Manual LinkedIn Steps:</strong><br>
            1. Go to LinkedIn.com manually<br>
            2. Click "Start a post"<br>
            3. Paste your full message (Ctrl/Cmd+V)<br>
            4. Upload your saved image<br>
            5. Share with your network!
        `, 15000);
    } catch (error) {
        console.error('LinkedIn prepare error:', error);
        showSuccess('‚ùå LinkedIn preparation failed. Please try again.', 3000);
    }
}   
    
   async function prepareInstagramStoryViral() {
    try {
        const caption = generateViralInstagramStoryCaption();
        await saveImageToDevice('instagram-story-card.png');
        await copyToClipboard(caption);
        
        // Instagram doesn't support web intents - open web version
        window.open('https://www.instagram.com/', '_blank');
        
        showSuccess(`
            ‚úÖ <strong>Instagram Story Ready!</strong><br>
            üì∏ Story-optimized image saved<br>
            üìù Caption copied to clipboard<br>
            üì± <strong>Manual Instagram Steps:</strong><br>
            1. Open Instagram app on mobile OR<br>
            2. Use Instagram web (stories limited)<br>
            3. Upload saved image<br>
            4. Paste caption text
        `, 12000);
    } catch (error) {
        showSuccess('‚ùå Instagram prep failed. Please try again.', 3000);
    }
}

async function prepareInstagramPostViral() {
    try {
        const caption = generateViralInstagramPostCaption();
        await saveImageToDevice('instagram-post-card.png');
        await copyToClipboard(caption);
        
        window.open('https://www.instagram.com/', '_blank');
        
        showSuccess(`
            ‚úÖ <strong>Instagram Post Ready!</strong><br>
            üì∏ High-quality image saved<br>
            üìù Detailed caption copied<br>
            üì± <strong>Manual Instagram Steps:</strong><br>
            1. Click + to create new post<br>
            2. Upload your saved image<br>
            3. Paste caption in description<br>
            4. Share to feed!
        `, 12000);
    } catch (error) {
        showSuccess('‚ùå Instagram prep failed. Please try again.', 3000);
    }
}

    async function shareToFacebookViral() {
        try {
            const message = generateViralFacebookMessage();
            const saved = await saveImageToDevice('facebook-community-post.png');
            const copied = await copyToClipboard(message);
            
            window.open('https://www.facebook.com/', '_blank');
            
            showSuccess(`
                ‚úÖ <strong>Facebook Community Post Ready!</strong><br>
                üì∏ Image saved for sharing<br>
                üìù Community-focused message copied<br>
                üë• <strong>Next:</strong> Create post and attach your image
            `);
        } catch (error) {
            showSuccess('‚ùå Facebook sharing failed. Please try again.', 2000);
        }
    }

    async function mobileNativeShare() {
        try {
            if (!navigator.share) {
                throw new Error('Native sharing not supported');
            }

            const imageBlob = await generateHighQualityCardImage();
            const message = generateViralTwitterMessage(); // Use general message for native share
            
            // Try to share with image
            const file = new File([imageBlob], 'smartwings-accountability.png', { type: 'image/png' });
            
            if (navigator.canShare && navigator.canShare({ files: [file] })) {
                await navigator.share({
                    title: "Airline Accountability Documentation",
                    text: message,
                    files: [file]
                });
                
                showSuccess('‚úÖ Successfully shared with image!');
            } else {
                // Fallback to text-only sharing + download image
                await navigator.share({
                    title: "Airline Accountability Documentation", 
                    text: message,
                    url: window.location.href
                });
                
                await saveImageToDevice('accountability-card.png');
                showSuccess('‚úÖ Shared successfully! Image saved for manual attachment.');
            }
        } catch (error) {
            console.error('Native share failed:', error);
            // Fallback to download + copy
            try {
                const message = generateViralTwitterMessage();
                await saveImageToDevice('accountability-card.png');
                await copyToClipboard(message);
                
                showSuccess(`
                    üì± <strong>Mobile Sharing Ready!</strong><br>
                    üì∏ Image saved to your device<br>
                    üìù Message copied to clipboard<br>
                    üí° Open your favorite app and paste/attach
                `);
            } catch (fallbackError) {
                showSuccess('‚ùå Sharing failed. Please try individual platform buttons.', 3000);
            }
        }
    }

    function trackViralCampaignEvent(platform, action, details = {}) {
        try {
            // Google Analytics 4 tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'viral_share_action', {
                    'platform': platform,
                    'action': action,
                    'campaign': 'smartwings_accountability',
                    'days_waiting': claimData.days,
                    'claim_amount': claimData.amount,
                    'user_agent': navigator.userAgent.includes('Mobile') ? 'mobile' : 'desktop',
                    ...details
                });
            }
            
            // Console logging for development
            console.log(`Viral Campaign Event: ${platform} - ${action}`, details);
            
        } catch (error) {
            console.log('Analytics tracking failed:', error);
        }
    }

    // ========================================
    // UTILITY FUNCTIONS
    // ========================================

    async function saveImageToDevice(filename) {
        try {
            const cardImage = await generateCardImage();
            const link = document.createElement('a');
            link.download = filename;
            link.href = URL.createObjectURL(cardImage);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
            return true;
        } catch (error) {
            console.error('Save image failed:', error);
            return false;
        }
    }

    async function copyToClipboard(text) {
        try {
            if (navigator.clipboard) {
                await navigator.clipboard.writeText(text);
                return true;
            }
            return false;
        } catch (error) {
            console.error('Copy to clipboard failed:', error);
            return false;
        }
    }

    async function generateHighQualityCardImage() {
        return await generateCardImage(false, 3); // High quality, scale 3
    }

    async function copyTwitterImage() {
        try {
            await copyImageToClipboard();
            showSuccess('‚úÖ Image copied! Perfect for Twitter sharing.');
        } catch (error) {
            showSuccess('‚ùå Copy failed. Please try download instead.', 2000);
        }
    }

    /**
     * COMPLETELY FIXED: Download card with working image generation
     */
    async function downloadCard() {
        const btn = document.querySelector('.share-btn.download');
        if (btn) {
            btn.disabled = true;
            btn.style.opacity = '0.7';
            btn.innerHTML = '<span>‚è≥</span> Creating...';
        }
        
        try {
            console.log('Starting download process...');
            
            if (!claimData || !claimData.days) {
                throw new Error("Please fill out the form first");
            }
            
            // Find the visible card
            let cardElement = null;
            const impactCard = document.getElementById('impact-card');
            const contextCard = document.getElementById('context-card');
            
            if (impactCard && impactCard.style.display !== 'none') {
                cardElement = impactCard;
                console.log("Using impact card for download");
            } else if (contextCard && contextCard.style.display !== 'none') {
                cardElement = contextCard;
                console.log("Using context card for download");
            } else {
                // Default to impact card
                cardElement = impactCard;
                if (cardElement) {
                    cardElement.style.display = 'block';
                    console.log("Defaulting to impact card");
                }
            }
            
            if (!cardElement) {
                throw new Error("No card found to download");
            }
            
            console.log('Card element found:', cardElement.id);
            console.log('Card dimensions:', cardElement.offsetWidth, 'x', cardElement.offsetHeight);
            
            // Ensure card is fully visible
            cardElement.style.display = 'block';
            cardElement.style.visibility = 'visible';
            cardElement.style.opacity = '1';
            
            // Wait a moment for rendering
            await new Promise(resolve => setTimeout(resolve, 100));
            
            console.log('Generating canvas with html2canvas...');
            
            const canvas = await html2canvas(cardElement, {
                scale: 2, // Higher quality
                backgroundColor: null,
                useCORS: true,
                allowTaint: true,
                logging: false,
                width: cardElement.offsetWidth,
                height: cardElement.offsetHeight,
                onclone: function(clonedDoc) {
                    // Ensure cloned element is visible
                    const clonedCard = clonedDoc.querySelector(`#${cardElement.id}`);
                    if (clonedCard) {
                        clonedCard.style.display = 'block';
                        clonedCard.style.visibility = 'visible';
                        clonedCard.style.opacity = '1';
                    }
                }
            });
            
            console.log('Canvas created successfully:', canvas.width, 'x', canvas.height);
            
            if (canvas.width === 0 || canvas.height === 0) {
                throw new Error("Generated canvas has zero dimensions");
            }
            
            // Convert to blob with high quality
            const blob = await new Promise((resolve, reject) => {
                canvas.toBlob((blob) => {
                    if (blob && blob.size > 1000) { // At least 1KB
                        resolve(blob);
                    } else {
                        reject(new Error("Generated blob is too small or empty"));
                    }
                }, 'image/png', 1.0);
            });
            
            console.log('High-quality blob created, size:', blob.size);
            
            // Create download
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            const dateString = new Date().toLocaleDateString().replace(/\//g, '-');
            link.download = `Smartwings-Claim-${claimData.days}days-${dateString}.png`;
            link.href = url;
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Clean up
            setTimeout(() => URL.revokeObjectURL(url), 1000);
            
            showSuccess('‚úÖ High-quality card downloaded successfully!');
            
        } catch (error) {
            console.error('Download failed:', error);
            showError(`Download failed: ${error.message}. Please try again.`);
        } finally {
            if (btn) {
                btn.disabled = false;
                btn.style.opacity = '1';
                btn.innerHTML = '<span>üì∏</span> Get Your Card';
            }
        }
    }

    /**
     * FIXED: Generate card image with improved quality and error handling
     */
    async function generateCardImage(smaller = false, scale = 2) {
        console.log("Starting generateCardImage...");
        
        // Determine which card to capture based on current design
        let cardElement;
        const cardElements = {
            'impact': document.getElementById('impact-card'), 
            'context': document.getElementById('context-card')
        };
        
        // Find the visible card
        for (const [design, element] of Object.entries(cardElements)) {
            if (element && element.style.display !== 'none') {
                cardElement = element;
                currentCardDesign = design;
                console.log(`Found visible card: ${design}`);
                break;
            }
        }
        
        // Fallback to impact card if none found
        if (!cardElement) {
            cardElement = cardElements.impact;
            if (cardElement) {
                cardElement.style.display = 'block';
                currentCardDesign = 'impact';
                console.log("Fallback to impact card");
            }
        }
        
        if (!cardElement) {
            throw new Error("No card element found to capture");
        }
        
        // Ensure the card is properly visible and styled
        const originalStyles = {
            display: cardElement.style.display,
            visibility: cardElement.style.visibility,
            position: cardElement.style.position,
            zIndex: cardElement.style.zIndex
        };
        
        // Force visibility
        cardElement.style.display = 'block';
        cardElement.style.visibility = 'visible';
        cardElement.style.position = 'relative';
        cardElement.style.zIndex = '1';
        
        // Wait for any images to load
        const images = cardElement.querySelectorAll('img');
        await Promise.all(Array.from(images).map(img => {
            if (img.complete) return Promise.resolve();
            return new Promise((resolve, reject) => {
                img.onload = resolve;
                img.onerror = resolve; // Don't fail on image errors
                setTimeout(resolve, 2000); // Timeout after 2 seconds
            });
        }));
        
        console.log("Images loaded, generating canvas...");
        
        return new Promise((resolve, reject) => {
            const options = {
                scale: smaller ? 1 : scale,
                backgroundColor: (currentCardDesign === 'context') ? '#ffffff' : null,
                useCORS: true,
                allowTaint: true,
                logging: false,
                imageTimeout: 0,
                removeContainer: false,
                foreignObjectRendering: false,
                width: cardElement.offsetWidth,
                height: cardElement.offsetHeight,
                onclone: function(clonedDoc) {
                    console.log("Cloning document...");
                    // Find the cloned card element
                    const clonedCard = clonedDoc.querySelector(`#${cardElement.id}`);
                    if (clonedCard) {
                        clonedCard.style.display = 'block';
                        clonedCard.style.visibility = 'visible';
                        clonedCard.style.position = 'relative';
                        clonedCard.style.zIndex = '1';
                        
                        // Ensure fonts are loaded
                        const style = clonedDoc.createElement('style');
                        style.textContent = `
                            * { font-family: 'Arial', sans-serif !important; }
                            .claim-card-impact { background: linear-gradient(135deg, #dc2626, #b91c1c) !important; }
                            .claim-card-context { background: linear-gradient(135deg, #f8f9fa, #e9ecef) !important; }
                        `;
                        clonedDoc.head.appendChild(style);
                    }
                }
            };
            
            html2canvas(cardElement, options).then(canvas => {
                console.log("Canvas generated successfully", canvas.width, canvas.height);
                
                // Restore original styles
                Object.assign(cardElement.style, originalStyles);
                
                if (canvas.width === 0 || canvas.height === 0) {
                    reject(new Error("Generated canvas has zero dimensions"));
                    return;
                }
                
                if (smaller) {
                    // Create a smaller canvas for email sharing
                    const smallCanvas = document.createElement('canvas');
                    const ctx = smallCanvas.getContext('2d');
                    smallCanvas.width = 400;
                    smallCanvas.height = (400 * canvas.height) / canvas.width;
                    ctx.drawImage(canvas, 0, 0, smallCanvas.width, smallCanvas.height);
                    smallCanvas.toBlob(blob => {
                        if (blob && blob.size > 0) {
                            resolve(blob);
                        } else {
                            reject(new Error("Failed to create smaller image blob"));
                        }
                    }, 'image/png', 0.95);
                } else {
                    canvas.toBlob(blob => {
                        if (blob && blob.size > 0) {
                            console.log("Image blob created successfully, size:", blob.size);
                            resolve(blob);
                        } else {
                            reject(new Error("Failed to create image blob"));
                        }
                    }, 'image/png', 0.95);
                }
            }).catch(error => {
                console.error("html2canvas error:", error);
                // Restore original styles on error
                Object.assign(cardElement.style, originalStyles);
                reject(error);
            });
        });
    }

    /**
     * COMPLETELY FIXED: Copy image with working clipboard
     */
    async function copyImageToClipboard() {
        const btn = document.querySelector('.share-btn.copy');
        if (btn) {
            btn.disabled = true;
            btn.style.opacity = '0.7';
            btn.innerHTML = '<span>‚è≥</span> Copying...';
        }
        
        try {
            console.log('Starting copy to clipboard...');
            
            if (!claimData || !claimData.days) {
                throw new Error("Please create a card first");
            }
            
            // Find the visible card
            let cardElement = null;
            const impactCard = document.getElementById('impact-card');
            const contextCard = document.getElementById('context-card');
            
            if (impactCard && impactCard.style.display !== 'none') {
                cardElement = impactCard;
            } else if (contextCard && contextCard.style.display !== 'none') {
                cardElement = contextCard;
            } else {
                cardElement = impactCard;
                if (cardElement) cardElement.style.display = 'block';
            }
            
            if (!cardElement) {
                throw new Error("No card found to copy");
            }
            
            console.log('Generating high-quality image for clipboard...');
            
            // Generate high-quality canvas
            const canvas = await html2canvas(cardElement, {
                scale: 3, // Even higher quality for clipboard
                backgroundColor: null,
                useCORS: true,
                allowTaint: true,
                logging: false
            });
            
            console.log('Canvas for clipboard created:', canvas.width, 'x', canvas.height);
            
            // Convert to blob
            const blob = await new Promise((resolve, reject) => {
                canvas.toBlob((blob) => {
                    if (blob && blob.size > 1000) {
                        resolve(blob);
                    } else {
                        reject(new Error("Failed to create clipboard image"));
                    }
                }, 'image/png', 1.0);
            });
            
            console.log('Clipboard blob created, size:', blob.size);
            
            // Try modern clipboard API
            if (navigator.clipboard && navigator.clipboard.write) {
                try {
                    await navigator.clipboard.write([
                        new ClipboardItem({
                            'image/png': blob
                        })
                    ]);
                    showSuccess('‚úÖ High-quality image copied to clipboard! You can now paste it anywhere.');
                    return;
                } catch (clipboardError) {
                    console.log('Modern clipboard API failed:', clipboardError);
                }
            }
            
            // Fallback: Show high-quality image for manual copying
            const imageUrl = URL.createObjectURL(blob);
            
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                z-index: 10000;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 20px;
            `;
            
            const img = document.createElement('img');
            img.src = imageUrl;
            img.style.cssText = `
                max-width: 90%;
                max-height: 70%;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            `;
            
            const instructions = document.createElement('div');
            instructions.style.cssText = `
                color: white;
                text-align: center;
                margin-top: 20px;
                padding: 20px;
                background: rgba(0,0,0,0.8);
                border-radius: 10px;
                max-width: 400px;
            `;
            
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            instructions.innerHTML = `
                <h3 style="margin-top: 0; color: white;">Copy High-Quality Image</h3>
                <p style="margin: 10px 0; color: white;">
                    ${isMobile 
                        ? 'Long-press on the image and select "Copy" or "Save to Photos"' 
                        : 'Right-click on the image and select "Copy Image"'}
                </p>
                <button id="close-overlay" style="
                    background: #dc2626;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                ">Close</button>
            `;
            
            overlay.appendChild(img);
            overlay.appendChild(instructions);
            document.body.appendChild(overlay);
            
            const closeBtn = document.getElementById('close-overlay');
            const closeOverlay = () => {
                document.body.removeChild(overlay);
                URL.revokeObjectURL(imageUrl);
            };
            
            closeBtn.addEventListener('click', closeOverlay);
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) closeOverlay();
            });
            
            showSuccess('High-quality image ready for copying!');
            
        } catch (error) {
            console.error('Copy failed:', error);
            showError(`Copy failed: ${error.message}. Please try the download option.`);
        } finally {
            if (btn) {
                btn.disabled = false;
                btn.style.opacity = '1';
                btn.innerHTML = '<span>üìã</span> Copy Image';
            }
        }
    }
    
    /**
     * FIXED: Set up card design toggle functionality
     */
    function setupCardToggle() {
        console.log("Setting up card toggle...");
        
        const cardToggle = document.querySelector('.card-toggle');
        if (!cardToggle) {
            console.error("Card toggle element not found");
            return;
        }
        
        // Get all cards
        const impactCard = document.getElementById('impact-card');
        const contextCard = document.getElementById('context-card');
        
        console.log("Cards found:", {
            impact: !!impactCard,
            context: !!contextCard
        });
        
        // Clear existing buttons and create new ones
        cardToggle.innerHTML = '';
        
        // Create Impact button
        const impactBtn = document.createElement('button');
        impactBtn.className = 'card-toggle-btn active';
        impactBtn.setAttribute('data-design', 'impact');
        impactBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
            Maximum Impact
        `;
        
        // Create Context button  
        const contextBtn = document.createElement('button');
        contextBtn.className = 'card-toggle-btn';
        contextBtn.setAttribute('data-design', 'context');
        contextBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 3v18h18"></path>
                <path d="M7 17l4-4 4 4 6-6"></path>
            </svg>
            Industry Data
        `;
        
        // Add buttons to toggle
        cardToggle.appendChild(impactBtn);
        cardToggle.appendChild(contextBtn);
        
        // Set up click handlers
        impactBtn.addEventListener('click', function() {
            console.log("Switching to impact card");
            impactBtn.classList.add('active');
            contextBtn.classList.remove('active');
            
            if (impactCard) impactCard.style.display = 'block';
            if (contextCard) contextCard.style.display = 'none';
            
            currentCardDesign = 'impact';
            console.log("Current card design:", currentCardDesign);
        });
        
        contextBtn.addEventListener('click', function() {
            console.log("Switching to context card");
            contextBtn.classList.add('active');
            impactBtn.classList.remove('active');
            
            if (contextCard) contextCard.style.display = 'block';
            if (impactCard) impactCard.style.display = 'none';
            
            currentCardDesign = 'context';
            console.log("Current card design:", currentCardDesign);
        });
        
        // Set initial state
        if (impactCard) {
            impactCard.style.display = 'block';
            console.log("Impact card set to display: block");
        }
        if (contextCard) {
            contextCard.style.display = 'none';
            console.log("Context card set to display: none");
        }
        
        currentCardDesign = 'impact';
        console.log("Card toggle setup complete. Current design:", currentCardDesign);
    }

    /**
     * Update both cards with claim data
     */
    function updateBothCards() {
        try {
            // Maximum Impact card
            if (document.getElementById('impact-days-count')) {
                document.getElementById('impact-days-count').textContent = claimData.days;
            }
            if (document.getElementById('impact-amount-value')) {
                document.getElementById('impact-amount-value').textContent = `‚Ç¨${claimData.amount}`;
            }
            if (document.getElementById('impact-submission-date')) {
                document.getElementById('impact-submission-date').textContent = claimData.submissionDate;
            }
            
            // Industry Data card (context card)
            if (document.getElementById('context-days-count')) {
                document.getElementById('context-days-count').textContent = claimData.days;
            }
            if (document.getElementById('context-amount-value')) {
                document.getElementById('context-amount-value').textContent = claimData.amount;
            }
            if (document.getElementById('context-submission-date')) {
                document.getElementById('context-submission-date').textContent = claimData.submissionDate;
            }
            
            // Update photo if available
            if (currentPhoto) {
                updateAllCardPhotos();
            }
        } catch (error) {
            console.error("Error in updateBothCards:", error);
        }
    }

    /**
     * FIXED: Update photos on all cards with complete rebuild
     */
    function updateAllCardPhotos() {
    console.log("Starting updateAllCardPhotos, currentPhoto exists:", !!currentPhoto);
    console.log("Current photo preview:", currentPhoto ? currentPhoto.substring(0, 50) + "..." : "none");
    
    if (!currentPhoto) {
        console.log("No current photo to update");
        resetAllCardPhotos();
        return;
    }
    
    // Force show photo sections on all cards
    console.log("Updating all card photos with current photo");
    
    // Update impact card photo
    const impactPhoto = document.getElementById('impact-photo');
    const impactContainer = document.getElementById('impact-photo-container');
    const impactOverlay = impactContainer ? impactContainer.closest('.evidence-photo') : null;
    
    if (impactPhoto && impactContainer) {
        console.log("Updating impact card photo");
        impactPhoto.src = currentPhoto;
        impactPhoto.onload = function() {
            // FORCE VISIBLE
            impactContainer.style.display = 'block';
            impactContainer.style.width = '100%';
            impactContainer.style.height = '100%';
            if (impactOverlay) {
                const overlay = impactOverlay.querySelector('.photo-overlay');
                if (overlay) overlay.style.display = 'none';
            }
            impactPhoto.style.transform = `rotate(${currentRotation}deg)`;
            impactPhoto.style.filter = `brightness(${currentBrightness}%)`;
            impactPhoto.style.width = '100%';
            impactPhoto.style.height = '100%';
            impactPhoto.style.objectFit = 'cover';
            console.log("Impact card photo updated successfully");
        };
    }
    
    // Update context card photo
    const contextPhoto = document.getElementById('context-photo');
    const contextContainer = document.getElementById('context-photo-container');
    const contextPlaceholder = document.getElementById('context-photo-placeholder');
    
    if (contextPhoto && contextContainer) {
        console.log("Updating context card photo");
        contextPhoto.src = currentPhoto;
        contextPhoto.onload = function() {
            contextContainer.style.display = 'block';
            if (contextPlaceholder) contextPlaceholder.style.display = 'none';
            contextPhoto.style.transform = `rotate(${currentRotation}deg)`;
            contextPhoto.style.filter = `brightness(${currentBrightness}%)`;
            contextPhoto.style.width = '100%';
            contextPhoto.style.height = '100%';
            contextPhoto.style.objectFit = 'cover';
            console.log("Context card photo updated successfully");
        };
    }
    
    console.log("Photo update process completed");
}

    /**
     * FIXED: Reset photos on all cards
     */
    function resetAllCardPhotos() {
        // Reset impact card (no placeholder to show)
        const impactContainer = document.getElementById('impact-photo-container');
        if (impactContainer) impactContainer.style.display = 'none';
        
        // Reset context card
        const contextContainer = document.getElementById('context-photo-container');
        const contextPlaceholder = document.getElementById('context-photo-placeholder');
        if (contextContainer) contextContainer.style.display = 'none';
        if (contextPlaceholder) contextPlaceholder.style.display = 'block';
    }

    /**
     * Show success message to user
     * @param {string} message - The success message to display
     */
    function showSuccess(message, duration = 15000) {
        const successEl = document.getElementById('success-message');
        if (successEl) {
            // Preserve line breaks by converting \n to <br>
            successEl.innerHTML = message.replace(/\n/g, '<br>');
            successEl.classList.add('show');
            
            setTimeout(() => {
                successEl.classList.remove('show');
            }, duration);
        }
        
        // Also show in sharing success area if it exists
        const sharingSuccessEl = document.getElementById('sharing-success');
        if (sharingSuccessEl) {
            sharingSuccessEl.innerHTML = message.replace(/\n/g, '<br>');
            sharingSuccessEl.classList.add('show');
            
            setTimeout(() => {
                sharingSuccessEl.classList.remove('show');
            }, duration);
        }
    }
    
</script>

<!-- ========================================= -->
<!-- END OF DOCUMENT -->
<!-- ========================================= -->

</body>
</html>
